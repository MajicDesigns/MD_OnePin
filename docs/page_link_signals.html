<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>One Pin Comms Link: Link Signaling Protocol</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MajicDesigns_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">One Pin Comms Link<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">One Pin Serial comms link layer implemented in software only</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('page_link_signals.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Link Signaling Protocol </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p >OnePin is a communications link is between a Primary device (PRI) and a Secondary device (SEC). The PRI is assumed to have more computational power be more capable than the SEC, which is envisaged as a small embedded processor providing local control for a sensor or actuator.</p>
<p >OnePin works using just one digital I/O pin and electrical ground per device pair, switching the direction of signal flow according to a timer based protocol implemented in both the PRI and SEC. The electrical connection depends on the hardware implementation, which mainly needs to ensure that the digital HIGH and LOW signal voltages are are compatible between devices.</p>
<p >Electrically, the link is idle HIGH and communications is effected by pulling the link LOW. When the I/O pins are set to input mode in the PRI or SEC they are pulled HIGH using internal pullup resistors (INPUT_PULLUP). However, an external pullup is also possible and compatible with the operations of the OnePin library.</p>
<p >The communications link timing is divided into fixed time slots T microseconds (&micro;s) long and all protocol timing is expressed as as multiples of T. There is no link clock - communications are synchronized to the falling edge of PRI. This is most effective when PRI timing functions are more accurate than SEC's. As all activity occurs on the same wire, communication is half duplex.</p>
<p >PRI initiates every communication between the devices down to bit level transfers for both directions. OnePin is also highly tolerant of SEC device failure. PRI can reestablish communications on the first packet when both devices are available - when the PRI restarts communications SEC will respond and signal its presence.</p>
<h2>Link Transactions</h2>
<p >Each OnePin transaction occurs in packet up to 32 bits long. Data transfers occur as sequential bits starting with the LSB (2<sup>0</sup>). The content and meaning of these data packets are determined by the application.</p>
<p >There are 5 basic signals used for communications (Write0, Write1, Read, Reset/Presence) described below. The timing (length) of the first part of the signal (header or preamble) identifies the signal type.</p>
<p >Transmission of a packet begins with PRI initiating a Reset Signal, then:</p><ul>
<li>To write data to SEC, PRI sends a packet using the Write Signal for each bit.</li>
<li>To read data from SEC, PRI initiates a Read Signal for each bit until a packet has been received.</li>
</ul>
<h3>Write 1 Signal</h3>
<ol type="1">
<li>PRI pulls the low LOW for 0.5T and then HIGH for the rest of the time slot.</li>
<li>On the rising edge SEC determines a 1 by the timing value.</li>
</ol>
<p ><img src="Write1.png" alt="" class="inline" title="Write 1 Timing Diagram"/></p>
<h3>Write 0 Signal</h3>
<ol type="1">
<li>PRI pulls the link LOW for 1.5T and then HIGH for the remainder of the time slot.</li>
<li>On the rising edge SEC determines a 0 by the timing value.</li>
</ol>
<p ><img src="Write0.png" alt="" class="inline" title="Write 0 Timing Diagram"/></p>
<h3>Read Signal</h3>
<ol type="1">
<li>PRI pulls the link LOW for 2.5T and then HIGH for the remainder of the time slot.</li>
<li>PRI reads the link 0.5T after the end of the time slot and waits T before further signaling if it detects a presence.</li>
<li>On the PRI rising edge, SEC sets link to HIGH/LOW for 1/0 bit value for T time.</li>
</ol>
<p ><img src="Read.png" alt="" class="inline" title="Read Timing Diagram"/></p>
<h3>Reset/Presence Signal</h3>
<p >Note: The reset signal is the start of every transaction.</p><ol type="1">
<li>PRI sets the link LOW for 5T and then sets it HIGH.</li>
<li>PRI reads the link T after setting the rising edge to detect the presence of SEC</li>
<li>PRI then waits 1.5T before starting further signaling if SEC was detected.</li>
<li>On the PRI rising edge, SEC sets the link LOW for 1.5T to signal its presence.</li>
</ol>
<p ><img src="Reset_Presence.png" alt="" class="inline" title="Reset/Presence Timing Diagram"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">OnePin Lighweight Comms link</a></li>
    <li class="footer">Generated on Sat Sep 4 2021 16:21:57 for One Pin Comms Link by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
